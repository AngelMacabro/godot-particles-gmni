[gd_scene load_steps=11 format=3 uid="uid://c1l7i7e3u2q2k"]

[ext_resource type="Shader" path="res://space_background.gdshader" id="1_shader"]
[ext_resource type="Script" path="res://player_controller.gd" id="2_script"]
[ext_resource type="Script" path="res://sky_controller.gd" id="3_sky_ctrl"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1"]
shader = ExtResource("1_shader")
shader_parameter/nebula_color1 = Color(0.02, 0.05, 0.2, 1)
shader_parameter/nebula_color2 = Color(0.1, 0.02, 0.15, 1)
shader_parameter/nebula_opacity = 0.038
shader_parameter/nebula_intensity = 0.095
shader_parameter/nebula_scale = 1.5
shader_parameter/nebula_speed = 0.001
shader_parameter/star_density = 5.0
shader_parameter/star_brightness = 1.5
shader_parameter/star_size = 0.01
shader_parameter/star_color_hot = Color(0.7, 0.9, 1, 1)
shader_parameter/star_color_cool = Color(1, 0.8, 0.6, 1)
shader_parameter/twinkle_speed = 5.0
shader_parameter/twinkle_intensity = 0.5
shader_parameter/camera_position = Vector3(0, 0, 0)
shader_parameter/parallax_factor = 0.001
shader_parameter/base_color = Color(0.001, 0.001, 0.005, 1)
shader_parameter/galactic_edge_intensity = 0.001

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("ShaderMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
tonemap_mode = 3
glow_enabled = true
glow_intensity = 0.5
glow_strength = 1.1
glow_bloom = 0.1
glow_blend_mode = 0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_1"]
radius = 0.4
height = 1.8

[sub_resource type="PointMesh" id="PointMesh_sdurm"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ship"]
albedo_color = Color(0.2, 0.22, 0.25, 1)
metallic = 0.8
roughness = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_floor"]
albedo_color = Color(0.1, 0.1, 0.1, 1)
metallic = 0.5
roughness = 0.8

[node name="Main" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("2_script")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("CapsuleShape3D_1")

[node name="Camera3D" type="Camera3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)

[node name="SpaceDust" type="CPUParticles3D" parent="Player/Camera3D"]
visible = false
amount = 1000
lifetime = 10.0
preprocess = 10.0
mesh = SubResource("PointMesh_sdurm")
emission_shape = 3
emission_box_extents = Vector3(50, 50, 50)
gravity = Vector3(0, 0, 0)
scale_amount_min = 0.1
scale_amount_max = 0.3
color = Color(1, 1, 1, 0.3)

[node name="Ship" type="Node3D" parent="."]

[node name="Cabin" type="CSGCombiner3D" parent="Ship"]
use_collision = true

[node name="OuterBox" type="CSGBox3D" parent="Ship/Cabin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, -2)
size = Vector3(6, 3, 6)
material = SubResource("StandardMaterial3D_ship")

[node name="InnerHollow" type="CSGBox3D" parent="Ship/Cabin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, -2)
operation = 2
size = Vector3(5.6, 2.7, 5.6)
material = SubResource("StandardMaterial3D_floor")

[node name="WindowHole" type="CSGBox3D" parent="Ship/Cabin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, -5)
operation = 2
size = Vector3(4, 1.5, 1)

[node name="WindowHole2" type="CSGBox3D" parent="Ship/Cabin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 1.2355)
operation = 2
size = Vector3(4, 1.5, 1)

[node name="WindowHole3" type="CSGBox3D" parent="Ship/Cabin"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -3.21088, 1.6, -2.07436)
operation = 2
size = Vector3(4, 1.5, 1)

[node name="WindowHole4" type="CSGBox3D" parent="Ship/Cabin"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 3.14383, 1.6, -2.04633)
operation = 2
size = Vector3(4, 1.5, 1)

[node name="OmniLight3D" type="OmniLight3D" parent="Ship/Cabin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.707602, 2.81651, -1.63571)
light_energy = 5.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, 0, 5, 0)
light_energy = 0.2
shadow_enabled = true

[node name="SkyController" type="Node3D" parent="."]
script = ExtResource("3_sky_ctrl")
nebula_opacity = 0.038
nebula_intensity = 0.095
star_density = 5.0
star_size = 0.01
twinkle_speed = 5.0
galactic_edge = 0.001
